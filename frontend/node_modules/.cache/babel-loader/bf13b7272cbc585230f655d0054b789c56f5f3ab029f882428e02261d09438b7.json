{"ast":null,"code":"import _slicedToArray from\"C:/Dev/foodgram-project-react/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{useTags}from'./index.js';import api from'../api';export default function useRecipes(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),subscriptions=_useState2[0],setSubscriptions=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),subscriptionsPage=_useState4[0],setSubscriptionsPage=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),subscriptionsCount=_useState6[0],setSubscriptionsCount=_useState6[1];var removeSubscription=function removeSubscription(_ref){var id=_ref.id;api.deleteSubscriptions({author_id:id}).then(function(res){var subscriptionsUpdated=subscriptions.filter(function(item){return item.id!==id;});setSubscriptions(subscriptionsUpdated);setSubscriptionsCount(subscriptionsCount-1);}).catch(function(err){var errors=err.errors;if(errors){alert(errors);}});};return{subscriptions:subscriptions,setSubscriptions:setSubscriptions,subscriptionsPage:subscriptionsPage,setSubscriptionsPage:setSubscriptionsPage,removeSubscription:removeSubscription,subscriptionsCount:subscriptionsCount,setSubscriptionsCount:setSubscriptionsCount};}","map":{"version":3,"names":["React","useState","useTags","api","useRecipes","subscriptions","setSubscriptions","subscriptionsPage","setSubscriptionsPage","subscriptionsCount","setSubscriptionsCount","removeSubscription","id","deleteSubscriptions","author_id","then","res","subscriptionsUpdated","filter","item","catch","err","errors","alert"],"sources":["C:/Dev/foodgram-project-react/frontend/src/utils/use-subscriptions.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useTags } from './index.js'\nimport api from '../api'\n\nexport default function useRecipes () {\n  const [ subscriptions, setSubscriptions ] = useState([])\n  const [ subscriptionsPage, setSubscriptionsPage ] = useState(1)\n  const [ subscriptionsCount, setSubscriptionsCount ] = useState(0)\n\n  const removeSubscription = ({ id }) => {\n    api\n      .deleteSubscriptions({ author_id: id })\n      .then(res => {\n        const subscriptionsUpdated = subscriptions.filter(item => {\n          return item.id !== id\n        })\n        setSubscriptions(subscriptionsUpdated)\n        setSubscriptionsCount(subscriptionsCount - 1)\n      })\n      .catch(err => {\n        const { errors } = err\n        if (errors) {\n          alert(errors)\n        }\n      })\n  }\n  \n  return {\n    subscriptions,\n    setSubscriptions,\n    subscriptionsPage,\n    setSubscriptionsPage,\n    removeSubscription,\n    subscriptionsCount,\n    setSubscriptionsCount\n  }\n}\n"],"mappings":"4HAAA,MAAOA,MAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,OAAO,KAAQ,YAAY,CACpC,MAAOC,IAAG,KAAM,QAAQ,CAExB,cAAe,SAASC,WAAU,EAAI,CACpC,cAA4CH,QAAQ,CAAC,EAAE,CAAC,wCAAhDI,aAAa,eAAEC,gBAAgB,eACvC,eAAoDL,QAAQ,CAAC,CAAC,CAAC,yCAAvDM,iBAAiB,eAAEC,oBAAoB,eAC/C,eAAsDP,QAAQ,CAAC,CAAC,CAAC,yCAAzDQ,kBAAkB,eAAEC,qBAAqB,eAEjD,GAAMC,mBAAkB,CAAG,QAArBA,mBAAkB,MAAe,IAATC,GAAE,MAAFA,EAAE,CAC9BT,GAAG,CACAU,mBAAmB,CAAC,CAAEC,SAAS,CAAEF,EAAG,CAAC,CAAC,CACtCG,IAAI,CAAC,SAAAC,GAAG,CAAI,CACX,GAAMC,qBAAoB,CAAGZ,aAAa,CAACa,MAAM,CAAC,SAAAC,IAAI,CAAI,CACxD,MAAOA,KAAI,CAACP,EAAE,GAAKA,EAAE,CACvB,CAAC,CAAC,CACFN,gBAAgB,CAACW,oBAAoB,CAAC,CACtCP,qBAAqB,CAACD,kBAAkB,CAAG,CAAC,CAAC,CAC/C,CAAC,CAAC,CACDW,KAAK,CAAC,SAAAC,GAAG,CAAI,CACZ,GAAQC,OAAM,CAAKD,GAAG,CAAdC,MAAM,CACd,GAAIA,MAAM,CAAE,CACVC,KAAK,CAACD,MAAM,CAAC,CACf,CACF,CAAC,CAAC,CACN,CAAC,CAED,MAAO,CACLjB,aAAa,CAAbA,aAAa,CACbC,gBAAgB,CAAhBA,gBAAgB,CAChBC,iBAAiB,CAAjBA,iBAAiB,CACjBC,oBAAoB,CAApBA,oBAAoB,CACpBG,kBAAkB,CAAlBA,kBAAkB,CAClBF,kBAAkB,CAAlBA,kBAAkB,CAClBC,qBAAqB,CAArBA,qBACF,CAAC,CACH"},"metadata":{},"sourceType":"module","externalDependencies":[]}