{"ast":null,"code":"import _slicedToArray from\"C:/Dev/foodgram-project-react/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{useTags}from'./index.js';import api from'../api';export default function useRecipes(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),recipes=_useState2[0],setRecipes=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),recipesCount=_useState4[0],setRecipesCount=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),recipesPage=_useState6[0],setRecipesPage=_useState6[1];var _useTags=useTags(),tagsValue=_useTags.value,handleTagsChange=_useTags.handleChange,setTagsValue=_useTags.setValue;var handleLike=function handleLike(_ref){var id=_ref.id,_ref$toLike=_ref.toLike,toLike=_ref$toLike===void 0?true:_ref$toLike;var method=toLike?api.addToFavorites.bind(api):api.removeFromFavorites.bind(api);method({id:id}).then(function(res){var recipesUpdated=recipes.map(function(recipe){if(recipe.id===id){recipe.is_favorited=toLike;}return recipe;});setRecipes(recipesUpdated);}).catch(function(err){var errors=err.errors;if(errors){alert(errors);}});};var handleAddToCart=function handleAddToCart(_ref2){var id=_ref2.id,_ref2$toAdd=_ref2.toAdd,toAdd=_ref2$toAdd===void 0?true:_ref2$toAdd,callback=_ref2.callback;var method=toAdd?api.addToOrders.bind(api):api.removeFromOrders.bind(api);method({id:id}).then(function(res){var recipesUpdated=recipes.map(function(recipe){if(recipe.id===id){recipe.is_in_shopping_cart=toAdd;}return recipe;});setRecipes(recipesUpdated);callback&&callback(toAdd);}).catch(function(err){var errors=err.errors;if(errors){alert(errors);}});};return{recipes:recipes,setRecipes:setRecipes,recipesCount:recipesCount,setRecipesCount:setRecipesCount,recipesPage:recipesPage,setRecipesPage:setRecipesPage,tagsValue:tagsValue,handleLike:handleLike,handleAddToCart:handleAddToCart,handleTagsChange:handleTagsChange,setTagsValue:setTagsValue};}","map":{"version":3,"names":["React","useState","useTags","api","useRecipes","recipes","setRecipes","recipesCount","setRecipesCount","recipesPage","setRecipesPage","tagsValue","value","handleTagsChange","handleChange","setTagsValue","setValue","handleLike","id","toLike","method","addToFavorites","bind","removeFromFavorites","then","res","recipesUpdated","map","recipe","is_favorited","catch","err","errors","alert","handleAddToCart","toAdd","callback","addToOrders","removeFromOrders","is_in_shopping_cart"],"sources":["C:/Dev/foodgram-project-react/frontend/src/utils/use-recipes.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useTags } from './index.js'\nimport api from '../api'\n\nexport default function useRecipes () {\n  const [ recipes, setRecipes ] = useState([])\n  const [ recipesCount, setRecipesCount ] = useState(0)\n  const [ recipesPage, setRecipesPage ] = useState(1)\n  const { value: tagsValue, handleChange: handleTagsChange, setValue: setTagsValue } = useTags()\n\n  const handleLike = ({ id, toLike = true }) => {\n    const method = toLike ? api.addToFavorites.bind(api) : api.removeFromFavorites.bind(api)\n    method({ id }).then(res => {\n      const recipesUpdated = recipes.map(recipe => {\n        if (recipe.id === id) {\n          recipe.is_favorited = toLike\n        }\n        return recipe\n      })\n      setRecipes(recipesUpdated)\n    })\n    .catch(err => {\n      const { errors } = err\n      if (errors) {\n        alert(errors)\n      }\n    })\n  }\n\n  const handleAddToCart = ({ id, toAdd = true, callback }) => {\n    const method = toAdd ? api.addToOrders.bind(api) : api.removeFromOrders.bind(api)\n    method({ id }).then(res => {\n      const recipesUpdated = recipes.map(recipe => {\n        if (recipe.id === id) {\n          recipe.is_in_shopping_cart = toAdd\n        }\n        return recipe\n      })\n      setRecipes(recipesUpdated)\n      callback && callback(toAdd)\n    })\n    .catch(err => {\n      const { errors } = err\n      if (errors) {\n        alert(errors)\n      }\n    })\n  }\n\n  return {\n    recipes,\n    setRecipes,\n    recipesCount,\n    setRecipesCount,\n    recipesPage,\n    setRecipesPage,\n    tagsValue,\n    handleLike,\n    handleAddToCart,\n    handleTagsChange,\n    setTagsValue\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}