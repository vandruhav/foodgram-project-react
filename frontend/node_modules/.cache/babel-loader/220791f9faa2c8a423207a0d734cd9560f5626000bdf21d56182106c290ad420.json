{"ast":null,"code":"var _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport api from '../api';\nexport default function useRecipe() {\n  _s();\n  const [recipe, setRecipe] = useState({});\n  const handleLike = _ref => {\n    let {\n      id,\n      toLike = 1\n    } = _ref;\n    const method = toLike ? api.addToFavorites.bind(api) : api.removeFromFavorites.bind(api);\n    method({\n      id\n    }).then(res => {\n      const recipeUpdated = {\n        ...recipe,\n        is_favorited: Number(toLike)\n      };\n      setRecipe(recipeUpdated);\n    }).catch(err => {\n      const {\n        errors\n      } = err;\n      if (errors) {\n        alert(errors);\n      }\n    });\n  };\n  const handleAddToCart = _ref2 => {\n    let {\n      id,\n      toAdd = 1,\n      callback\n    } = _ref2;\n    const method = toAdd ? api.addToOrders.bind(api) : api.removeFromOrders.bind(api);\n    method({\n      id\n    }).then(res => {\n      const recipeUpdated = {\n        ...recipe,\n        is_in_shopping_cart: Number(toAdd)\n      };\n      setRecipe(recipeUpdated);\n      callback && callback(toAdd);\n    }).catch(err => {\n      const {\n        errors\n      } = err;\n      if (errors) {\n        alert(errors);\n      }\n    });\n  };\n  const handleSubscribe = _ref3 => {\n    let {\n      author_id,\n      toSubscribe = 1\n    } = _ref3;\n    const method = toSubscribe ? api.subscribe.bind(api) : api.deleteSubscriptions.bind(api);\n    method({\n      author_id\n    }).then(_ => {\n      const recipeUpdated = {\n        ...recipe,\n        author: {\n          ...recipe.author,\n          is_subscribed: toSubscribe\n        }\n      };\n      setRecipe(recipeUpdated);\n    }).catch(err => {\n      const {\n        errors\n      } = err;\n      if (errors) {\n        alert(errors);\n      }\n    });\n  };\n  return {\n    recipe,\n    setRecipe,\n    handleLike,\n    handleAddToCart,\n    handleSubscribe\n  };\n}\n_s(useRecipe, \"IoDFMzTRD7PFLfrhujUo9d41z0w=\");","map":{"version":3,"names":["React","useState","api","useRecipe","recipe","setRecipe","handleLike","id","toLike","method","addToFavorites","bind","removeFromFavorites","then","res","recipeUpdated","is_favorited","Number","catch","err","errors","alert","handleAddToCart","toAdd","callback","addToOrders","removeFromOrders","is_in_shopping_cart","handleSubscribe","author_id","toSubscribe","subscribe","deleteSubscriptions","_","author","is_subscribed"],"sources":["C:/Dev/foodgram-project-react/frontend/src/utils/use-recipe.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport api from '../api'\n\nexport default function useRecipe () {\n  const [ recipe, setRecipe ] = useState({})\n\n  const handleLike = ({ id, toLike = 1 }) => {\n    const method = toLike ? api.addToFavorites.bind(api) : api.removeFromFavorites.bind(api)\n    method({ id }).then(res => {\n      const recipeUpdated = { ...recipe, is_favorited: Number(toLike) }\n      setRecipe(recipeUpdated)\n    })\n    .catch(err => {\n      const { errors } = err\n      if (errors) {\n        alert(errors)\n      }\n    })\n  }\n\n  const handleAddToCart = ({ id, toAdd = 1, callback }) => {\n    const method = toAdd ? api.addToOrders.bind(api) : api.removeFromOrders.bind(api)\n    method({ id }).then(res => {\n      const recipeUpdated = { ...recipe, is_in_shopping_cart: Number(toAdd) }\n      setRecipe(recipeUpdated)\n      callback && callback(toAdd)\n    })\n    .catch(err => {\n      const { errors } = err\n      if (errors) {\n        alert(errors)\n      }\n    })\n  }\n\n  const handleSubscribe = ({ author_id, toSubscribe = 1 }) => {\n    const method = toSubscribe ? api.subscribe.bind(api) : api.deleteSubscriptions.bind(api)\n      method({\n        author_id\n      })\n      .then(_ => {\n        const recipeUpdated = { ...recipe, author: { ...recipe.author, is_subscribed: toSubscribe } }\n        setRecipe(recipeUpdated)\n      })\n      .catch(err => {\n        const { errors } = err\n        if (errors) {\n          alert(errors)\n        }\n      })\n  }\n\n  return {\n    recipe,\n    setRecipe,\n    handleLike,\n    handleAddToCart,\n    handleSubscribe\n  }\n}\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,OAAOC,GAAG,MAAM,QAAQ;AAExB,eAAe,SAASC,SAAS,GAAI;EAAA;EACnC,MAAM,CAAEC,MAAM,EAAEC,SAAS,CAAE,GAAGJ,QAAQ,CAAC,CAAC,CAAC,CAAC;EAE1C,MAAMK,UAAU,GAAG,QAAwB;IAAA,IAAvB;MAAEC,EAAE;MAAEC,MAAM,GAAG;IAAE,CAAC;IACpC,MAAMC,MAAM,GAAGD,MAAM,GAAGN,GAAG,CAACQ,cAAc,CAACC,IAAI,CAACT,GAAG,CAAC,GAAGA,GAAG,CAACU,mBAAmB,CAACD,IAAI,CAACT,GAAG,CAAC;IACxFO,MAAM,CAAC;MAAEF;IAAG,CAAC,CAAC,CAACM,IAAI,CAACC,GAAG,IAAI;MACzB,MAAMC,aAAa,GAAG;QAAE,GAAGX,MAAM;QAAEY,YAAY,EAAEC,MAAM,CAACT,MAAM;MAAE,CAAC;MACjEH,SAAS,CAACU,aAAa,CAAC;IAC1B,CAAC,CAAC,CACDG,KAAK,CAACC,GAAG,IAAI;MACZ,MAAM;QAAEC;MAAO,CAAC,GAAGD,GAAG;MACtB,IAAIC,MAAM,EAAE;QACVC,KAAK,CAACD,MAAM,CAAC;MACf;IACF,CAAC,CAAC;EACJ,CAAC;EAED,MAAME,eAAe,GAAG,SAAiC;IAAA,IAAhC;MAAEf,EAAE;MAAEgB,KAAK,GAAG,CAAC;MAAEC;IAAS,CAAC;IAClD,MAAMf,MAAM,GAAGc,KAAK,GAAGrB,GAAG,CAACuB,WAAW,CAACd,IAAI,CAACT,GAAG,CAAC,GAAGA,GAAG,CAACwB,gBAAgB,CAACf,IAAI,CAACT,GAAG,CAAC;IACjFO,MAAM,CAAC;MAAEF;IAAG,CAAC,CAAC,CAACM,IAAI,CAACC,GAAG,IAAI;MACzB,MAAMC,aAAa,GAAG;QAAE,GAAGX,MAAM;QAAEuB,mBAAmB,EAAEV,MAAM,CAACM,KAAK;MAAE,CAAC;MACvElB,SAAS,CAACU,aAAa,CAAC;MACxBS,QAAQ,IAAIA,QAAQ,CAACD,KAAK,CAAC;IAC7B,CAAC,CAAC,CACDL,KAAK,CAACC,GAAG,IAAI;MACZ,MAAM;QAAEC;MAAO,CAAC,GAAGD,GAAG;MACtB,IAAIC,MAAM,EAAE;QACVC,KAAK,CAACD,MAAM,CAAC;MACf;IACF,CAAC,CAAC;EACJ,CAAC;EAED,MAAMQ,eAAe,GAAG,SAAoC;IAAA,IAAnC;MAAEC,SAAS;MAAEC,WAAW,GAAG;IAAE,CAAC;IACrD,MAAMrB,MAAM,GAAGqB,WAAW,GAAG5B,GAAG,CAAC6B,SAAS,CAACpB,IAAI,CAACT,GAAG,CAAC,GAAGA,GAAG,CAAC8B,mBAAmB,CAACrB,IAAI,CAACT,GAAG,CAAC;IACtFO,MAAM,CAAC;MACLoB;IACF,CAAC,CAAC,CACDhB,IAAI,CAACoB,CAAC,IAAI;MACT,MAAMlB,aAAa,GAAG;QAAE,GAAGX,MAAM;QAAE8B,MAAM,EAAE;UAAE,GAAG9B,MAAM,CAAC8B,MAAM;UAAEC,aAAa,EAAEL;QAAY;MAAE,CAAC;MAC7FzB,SAAS,CAACU,aAAa,CAAC;IAC1B,CAAC,CAAC,CACDG,KAAK,CAACC,GAAG,IAAI;MACZ,MAAM;QAAEC;MAAO,CAAC,GAAGD,GAAG;MACtB,IAAIC,MAAM,EAAE;QACVC,KAAK,CAACD,MAAM,CAAC;MACf;IACF,CAAC,CAAC;EACN,CAAC;EAED,OAAO;IACLhB,MAAM;IACNC,SAAS;IACTC,UAAU;IACVgB,eAAe;IACfM;EACF,CAAC;AACH;AAAC,GAxDuBzB,SAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}