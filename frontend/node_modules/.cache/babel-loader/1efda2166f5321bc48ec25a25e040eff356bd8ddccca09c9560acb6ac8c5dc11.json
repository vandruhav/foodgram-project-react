{"ast":null,"code":"import _slicedToArray from\"C:/Dev/foodgram-project-react/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect,useRef}from'react';import styles from'./styles.module.css';import{Button}from'../index';import cn from'classnames';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var FileInput=function FileInput(_ref){var label=_ref.label,onChange=_ref.onChange,_ref$file=_ref.file,file=_ref$file===void 0?null:_ref$file,className=_ref.className;var _useState=useState(file),_useState2=_slicedToArray(_useState,2),currentFile=_useState2[0],setCurrentFile=_useState2[1];var fileInput=useRef(null);useEffect(function(_){if(file!==currentFile){setCurrentFile(file);}},[file]);var getBase64=function getBase64(file){var reader=new FileReader();reader.readAsDataURL(file);reader.onload=function(){setCurrentFile(reader.result);onChange(reader.result);};reader.onerror=function(error){console.log('Error: ',error);};};return/*#__PURE__*/_jsxs(\"div\",{className:cn(styles.container,className),children:[/*#__PURE__*/_jsx(\"label\",{className:styles.label,children:label}),/*#__PURE__*/_jsx(\"input\",{className:styles.fileInput,type:\"file\",ref:fileInput,onChange:function onChange(e){var file=e.target.files[0];getBase64(file);}}),/*#__PURE__*/_jsx(\"div\",{onClick:function onClick(_){fileInput.current.click();},className:styles.button,type:\"button\",children:\"\\u0412\\u044B\\u0431\\u0440\\u0430\\u0442\\u044C \\u0444\\u0430\\u0439\\u043B\"}),currentFile&&/*#__PURE__*/_jsx(\"div\",{className:styles.image,style:{backgroundImage:\"url(\".concat(currentFile,\")\")}})]});};export default FileInput;","map":{"version":3,"names":["useState","useEffect","useRef","styles","Button","cn","FileInput","label","onChange","file","className","currentFile","setCurrentFile","fileInput","_","getBase64","reader","FileReader","readAsDataURL","onload","result","onerror","error","console","log","container","e","target","files","current","click","button","image","backgroundImage"],"sources":["C:/Dev/foodgram-project-react/frontend/src/components/file-input/index.js"],"sourcesContent":["import { useState, useEffect, useRef } from 'react'\nimport styles from './styles.module.css'\nimport { Button } from '../index'\nimport cn from 'classnames'\n\nconst FileInput = ({ label, onChange, file = null, className }) => {\n  const [ currentFile, setCurrentFile ] = useState(file)\n  const fileInput = useRef(null)\n  useEffect(_ => {\n    if (file !== currentFile) {\n      setCurrentFile(file)\n    }\n  }, [file])\n\n  const getBase64 = (file) => {\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onload = function () {\n      setCurrentFile(reader.result)\n      onChange(reader.result)\n    };\n    reader.onerror = function (error) {\n      console.log('Error: ', error);\n    }\n  }\n\n  return <div className={cn(styles.container, className)}>\n    <label className={styles.label}>\n      {label}\n    </label>\n    <input\n      className={styles.fileInput}\n      type='file'\n      ref={fileInput}\n      onChange={e => {\n        const file = e.target.files[0]\n        getBase64(file)\n      }}\n    />\n    <div\n      onClick={_ => {\n        fileInput.current.click()\n      }}\n      className={styles.button}\n      type='button'\n    >\n      Выбрать файл\n    </div>\n    {currentFile && <div className={styles.image} style={{\n      backgroundImage: `url(${currentFile})`\n    }} />}\n  </div>\n}\n\nexport default FileInput"],"mappings":"4HAAA,OAASA,QAAQ,CAAEC,SAAS,CAAEC,MAAM,KAAQ,OAAO,CACnD,MAAOC,OAAM,KAAM,qBAAqB,CACxC,OAASC,MAAM,KAAQ,UAAU,CACjC,MAAOC,GAAE,KAAM,YAAY,yFAE3B,GAAMC,UAAS,CAAG,QAAZA,UAAS,MAAoD,IAA9CC,MAAK,MAALA,KAAK,CAAEC,QAAQ,MAARA,QAAQ,gBAAEC,IAAI,CAAJA,IAAI,oBAAG,IAAI,WAAEC,SAAS,MAATA,SAAS,CAC1D,cAAwCV,QAAQ,CAACS,IAAI,CAAC,wCAA9CE,WAAW,eAAEC,cAAc,eACnC,GAAMC,UAAS,CAAGX,MAAM,CAAC,IAAI,CAAC,CAC9BD,SAAS,CAAC,SAAAa,CAAC,CAAI,CACb,GAAIL,IAAI,GAAKE,WAAW,CAAE,CACxBC,cAAc,CAACH,IAAI,CAAC,CACtB,CACF,CAAC,CAAE,CAACA,IAAI,CAAC,CAAC,CAEV,GAAMM,UAAS,CAAG,QAAZA,UAAS,CAAIN,IAAI,CAAK,CAC1B,GAAMO,OAAM,CAAG,GAAIC,WAAU,EAAE,CAC/BD,MAAM,CAACE,aAAa,CAACT,IAAI,CAAC,CAC1BO,MAAM,CAACG,MAAM,CAAG,UAAY,CAC1BP,cAAc,CAACI,MAAM,CAACI,MAAM,CAAC,CAC7BZ,QAAQ,CAACQ,MAAM,CAACI,MAAM,CAAC,CACzB,CAAC,CACDJ,MAAM,CAACK,OAAO,CAAG,SAAUC,KAAK,CAAE,CAChCC,OAAO,CAACC,GAAG,CAAC,SAAS,CAAEF,KAAK,CAAC,CAC/B,CAAC,CACH,CAAC,CAED,mBAAO,aAAK,SAAS,CAAEjB,EAAE,CAACF,MAAM,CAACsB,SAAS,CAAEf,SAAS,CAAE,wBACrD,cAAO,SAAS,CAAEP,MAAM,CAACI,KAAM,UAC5BA,KAAK,EACA,cACR,cACE,SAAS,CAAEJ,MAAM,CAACU,SAAU,CAC5B,IAAI,CAAC,MAAM,CACX,GAAG,CAAEA,SAAU,CACf,QAAQ,CAAE,kBAAAa,CAAC,CAAI,CACb,GAAMjB,KAAI,CAAGiB,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAC9Bb,SAAS,CAACN,IAAI,CAAC,CACjB,CAAE,EACF,cACF,YACE,OAAO,CAAE,iBAAAK,CAAC,CAAI,CACZD,SAAS,CAACgB,OAAO,CAACC,KAAK,EAAE,CAC3B,CAAE,CACF,SAAS,CAAE3B,MAAM,CAAC4B,MAAO,CACzB,IAAI,CAAC,QAAQ,iFAGT,CACLpB,WAAW,eAAI,YAAK,SAAS,CAAER,MAAM,CAAC6B,KAAM,CAAC,KAAK,CAAE,CACnDC,eAAe,eAAStB,WAAW,KACrC,CAAE,EAAG,GACD,CACR,CAAC,CAED,cAAeL,UAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}