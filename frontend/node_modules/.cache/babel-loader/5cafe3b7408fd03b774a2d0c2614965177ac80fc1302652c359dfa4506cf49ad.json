{"ast":null,"code":"import _objectSpread from\"C:/Dev/foodgram-project-react/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{Card,Title,Pagination,CardList,Container,Main,CheckboxGroup}from'../../components';import styles from'./styles.module.css';import{useRecipes}from'../../utils/index.js';import{useEffect}from'react';import api from'../../api';import MetaTags from'react-meta-tags';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{createElement as _createElement}from\"react\";var HomePage=function HomePage(_ref){var updateOrders=_ref.updateOrders;var _useRecipes=useRecipes(),recipes=_useRecipes.recipes,setRecipes=_useRecipes.setRecipes,recipesCount=_useRecipes.recipesCount,setRecipesCount=_useRecipes.setRecipesCount,recipesPage=_useRecipes.recipesPage,setRecipesPage=_useRecipes.setRecipesPage,tagsValue=_useRecipes.tagsValue,setTagsValue=_useRecipes.setTagsValue,handleTagsChange=_useRecipes.handleTagsChange,handleLike=_useRecipes.handleLike,handleAddToCart=_useRecipes.handleAddToCart;var getRecipes=function getRecipes(_ref2){var _ref2$page=_ref2.page,page=_ref2$page===void 0?1:_ref2$page,tags=_ref2.tags;api.getRecipes({page:page,tags:tags}).then(function(res){var results=res.results,count=res.count;setRecipes(results);setRecipesCount(count);});};useEffect(function(_){getRecipes({page:recipesPage,tags:tagsValue});},[recipesPage,tagsValue]);useEffect(function(_){api.getTags().then(function(tags){setTagsValue(tags.map(function(tag){return _objectSpread(_objectSpread({},tag),{},{value:true});}));});},[]);return/*#__PURE__*/_jsx(Main,{children:/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsxs(MetaTags,{children:[/*#__PURE__*/_jsx(\"title\",{children:\"\\u0420\\u0435\\u0446\\u0435\\u043F\\u0442\\u044B\"}),/*#__PURE__*/_jsx(\"meta\",{name:\"description\",content:\"\\u041F\\u0440\\u043E\\u0434\\u0443\\u043A\\u0442\\u043E\\u0432\\u044B\\u0439 \\u043F\\u043E\\u043C\\u043E\\u0449\\u043D\\u0438\\u043A - \\u0420\\u0435\\u0446\\u0435\\u043F\\u0442\\u044B\"}),/*#__PURE__*/_jsx(\"meta\",{property:\"og:title\",content:\"\\u0420\\u0435\\u0446\\u0435\\u043F\\u0442\\u044B\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.title,children:[/*#__PURE__*/_jsx(Title,{title:\"\\u0420\\u0435\\u0446\\u0435\\u043F\\u0442\\u044B\"}),/*#__PURE__*/_jsx(CheckboxGroup,{values:tagsValue,handleChange:function handleChange(value){setRecipesPage(1);handleTagsChange(value);}})]}),/*#__PURE__*/_jsx(CardList,{children:recipes.map(function(card){return/*#__PURE__*/_createElement(Card,_objectSpread(_objectSpread({},card),{},{key:card.id,updateOrders:updateOrders,handleLike:handleLike,handleAddToCart:handleAddToCart}));})}),/*#__PURE__*/_jsx(Pagination,{count:recipesCount,limit:6,page:recipesPage,onPageChange:function onPageChange(page){return setRecipesPage(page);}})]})});};export default HomePage;","map":{"version":3,"names":["Card","Title","Pagination","CardList","Container","Main","CheckboxGroup","styles","useRecipes","useEffect","api","MetaTags","HomePage","updateOrders","recipes","setRecipes","recipesCount","setRecipesCount","recipesPage","setRecipesPage","tagsValue","setTagsValue","handleTagsChange","handleLike","handleAddToCart","getRecipes","page","tags","then","res","results","count","_","getTags","map","tag","value","title","card","id"],"sources":["C:/Dev/foodgram-project-react/frontend/src/pages/main/index.js"],"sourcesContent":["import { Card, Title, Pagination, CardList, Container, Main, CheckboxGroup  } from '../../components'\nimport styles from './styles.module.css'\nimport { useRecipes } from '../../utils/index.js'\nimport { useEffect } from 'react'\nimport api from '../../api'\nimport MetaTags from 'react-meta-tags'\n\nconst HomePage = ({ updateOrders }) => {\n  const {\n    recipes,\n    setRecipes,\n    recipesCount,\n    setRecipesCount,\n    recipesPage,\n    setRecipesPage,\n    tagsValue,\n    setTagsValue,\n    handleTagsChange,\n    handleLike,\n    handleAddToCart\n  } = useRecipes()\n\n\n  const getRecipes = ({ page = 1, tags }) => {\n    api\n      .getRecipes({ page, tags })\n      .then(res => {\n        const { results, count } = res\n        setRecipes(results)\n        setRecipesCount(count)\n      })\n  }\n\n  useEffect(_ => {\n    getRecipes({ page: recipesPage, tags: tagsValue })\n  }, [recipesPage, tagsValue])\n\n  useEffect(_ => {\n    api.getTags()\n      .then(tags => {\n        setTagsValue(tags.map(tag => ({ ...tag, value: true })))\n      })\n  }, [])\n\n\n  return <Main>\n    <Container>\n      <MetaTags>\n        <title>Рецепты</title>\n        <meta name=\"description\" content=\"Продуктовый помощник - Рецепты\" />\n        <meta property=\"og:title\" content=\"Рецепты\" />\n      </MetaTags>\n      <div className={styles.title}>\n        <Title title='Рецепты' />\n        <CheckboxGroup\n          values={tagsValue}\n          handleChange={value => {\n            setRecipesPage(1)\n            handleTagsChange(value)\n          }}\n        />\n      </div>\n      <CardList>\n        {recipes.map(card => <Card\n          {...card}\n          key={card.id}\n          updateOrders={updateOrders}\n          handleLike={handleLike}\n          handleAddToCart={handleAddToCart}\n        />)}\n      </CardList>\n      <Pagination\n        count={recipesCount}\n        limit={6}\n        page={recipesPage}\n        onPageChange={page => setRecipesPage(page)}\n      />\n    </Container>\n  </Main>\n}\n\nexport default HomePage\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}