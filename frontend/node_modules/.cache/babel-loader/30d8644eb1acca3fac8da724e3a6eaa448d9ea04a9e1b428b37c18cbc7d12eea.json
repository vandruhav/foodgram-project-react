{"ast":null,"code":"import _objectSpread from\"C:/Dev/foodgram-project-react/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Dev/foodgram-project-react/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import api from'../api';export default function useRecipe(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),recipe=_useState2[0],setRecipe=_useState2[1];var handleLike=function handleLike(_ref){var id=_ref.id,_ref$toLike=_ref.toLike,toLike=_ref$toLike===void 0?1:_ref$toLike;var method=toLike?api.addToFavorites.bind(api):api.removeFromFavorites.bind(api);method({id:id}).then(function(res){var recipeUpdated=_objectSpread(_objectSpread({},recipe),{},{is_favorited:Number(toLike)});setRecipe(recipeUpdated);}).catch(function(err){var errors=err.errors;if(errors){alert(errors);}});};var handleAddToCart=function handleAddToCart(_ref2){var id=_ref2.id,_ref2$toAdd=_ref2.toAdd,toAdd=_ref2$toAdd===void 0?1:_ref2$toAdd,callback=_ref2.callback;var method=toAdd?api.addToOrders.bind(api):api.removeFromOrders.bind(api);method({id:id}).then(function(res){var recipeUpdated=_objectSpread(_objectSpread({},recipe),{},{is_in_shopping_cart:Number(toAdd)});setRecipe(recipeUpdated);callback&&callback(toAdd);}).catch(function(err){var errors=err.errors;if(errors){alert(errors);}});};var handleSubscribe=function handleSubscribe(_ref3){var author_id=_ref3.author_id,_ref3$toSubscribe=_ref3.toSubscribe,toSubscribe=_ref3$toSubscribe===void 0?1:_ref3$toSubscribe;var method=toSubscribe?api.subscribe.bind(api):api.deleteSubscriptions.bind(api);method({author_id:author_id}).then(function(_){var recipeUpdated=_objectSpread(_objectSpread({},recipe),{},{author:_objectSpread(_objectSpread({},recipe.author),{},{is_subscribed:toSubscribe})});setRecipe(recipeUpdated);}).catch(function(err){var errors=err.errors;if(errors){alert(errors);}});};return{recipe:recipe,setRecipe:setRecipe,handleLike:handleLike,handleAddToCart:handleAddToCart,handleSubscribe:handleSubscribe};}","map":{"version":3,"names":["React","useState","api","useRecipe","recipe","setRecipe","handleLike","id","toLike","method","addToFavorites","bind","removeFromFavorites","then","res","recipeUpdated","is_favorited","Number","catch","err","errors","alert","handleAddToCart","toAdd","callback","addToOrders","removeFromOrders","is_in_shopping_cart","handleSubscribe","author_id","toSubscribe","subscribe","deleteSubscriptions","_","author","is_subscribed"],"sources":["C:/Dev/foodgram-project-react/frontend/src/utils/use-recipe.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport api from '../api'\n\nexport default function useRecipe () {\n  const [ recipe, setRecipe ] = useState({})\n\n  const handleLike = ({ id, toLike = 1 }) => {\n    const method = toLike ? api.addToFavorites.bind(api) : api.removeFromFavorites.bind(api)\n    method({ id }).then(res => {\n      const recipeUpdated = { ...recipe, is_favorited: Number(toLike) }\n      setRecipe(recipeUpdated)\n    })\n    .catch(err => {\n      const { errors } = err\n      if (errors) {\n        alert(errors)\n      }\n    })\n  }\n\n  const handleAddToCart = ({ id, toAdd = 1, callback }) => {\n    const method = toAdd ? api.addToOrders.bind(api) : api.removeFromOrders.bind(api)\n    method({ id }).then(res => {\n      const recipeUpdated = { ...recipe, is_in_shopping_cart: Number(toAdd) }\n      setRecipe(recipeUpdated)\n      callback && callback(toAdd)\n    })\n    .catch(err => {\n      const { errors } = err\n      if (errors) {\n        alert(errors)\n      }\n    })\n  }\n\n  const handleSubscribe = ({ author_id, toSubscribe = 1 }) => {\n    const method = toSubscribe ? api.subscribe.bind(api) : api.deleteSubscriptions.bind(api)\n      method({\n        author_id\n      })\n      .then(_ => {\n        const recipeUpdated = { ...recipe, author: { ...recipe.author, is_subscribed: toSubscribe } }\n        setRecipe(recipeUpdated)\n      })\n      .catch(err => {\n        const { errors } = err\n        if (errors) {\n          alert(errors)\n        }\n      })\n  }\n\n  return {\n    recipe,\n    setRecipe,\n    handleLike,\n    handleAddToCart,\n    handleSubscribe\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}